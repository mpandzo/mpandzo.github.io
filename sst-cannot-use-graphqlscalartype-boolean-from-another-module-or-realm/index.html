<!DOCTYPE html>
<html lang="en">
	<head>
		<!-- Global Metadata --><meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">

<!-- Canonical URL -->
<link rel="canonical" href="https://mirzapandzo.com/sst-cannot-use-graphqlscalartype-boolean-from-another-module-or-realm">
	
<!-- RSS Feed Discovery -->
<link rel="alternate" type="application/rss+xml" title="RSS" href="/rss.xml">

<!-- Primary Meta Tags -->
<title>Mirza Pandzo - SST - Cannot use GraphQLScalarType &quot;Boolean&quot; from another module or realm</title>
<meta name="title" content="Mirza Pandzo - SST - Cannot use GraphQLScalarType &#34;Boolean&#34; from another module or realm">
<meta name="description" content="Weird console error when using pothos as a GraphQL schema builder for Typescript in SST">

<!-- Open Graph / Facebook -->
<meta property="og:type" content="website">
<meta property="og:url" content="https://mirzapandzo.com/sst-cannot-use-graphqlscalartype-boolean-from-another-module-or-realm">
<meta property="og:title" content="Mirza Pandzo - SST - Cannot use GraphQLScalarType &#34;Boolean&#34; from another module or realm">
<meta property="og:description" content="Weird console error when using pothos as a GraphQL schema builder for Typescript in SST">

<!-- Twitter -->
<meta property="twitter:card" content="summary_large_image">
<meta property="twitter:url" content="https://mirzapandzo.com/sst-cannot-use-graphqlscalartype-boolean-from-another-module-or-realm">
<meta property="twitter:title" content="Mirza Pandzo - SST - Cannot use GraphQLScalarType &#34;Boolean&#34; from another module or realm">
<meta property="twitter:description" content="Weird console error when using pothos as a GraphQL schema builder for Typescript in SST">
	<link rel="stylesheet" href="/_astro/_...slug_.9f8b40fe.css" />
<link rel="stylesheet" href="/_astro/_...slug_.fdefd593.css" /></head>

	<body>
		<header class="my-8 container">
	<nav class="flex flex-col space-y-2 lg:space-y-0 lg:flex-row lg:justify-between px-4 lg:px-0 lg:items-center">
		<a class="font-bold text-2xl" href="/">Mirza Pandzo</a>
		<div class="flex space-x-4 text-sm">
			<a class="hover:underline" href="https://www.linkedin.com/in/mirzapandzo">LinkedIn</a>
			<a class="hover:underline" href="https://github.com/mpandzo">Github</a>
			<a class="hover:underline" href="/rss.xml">Rss</a>			
		</div>
	</nav>
</header>
		<main class="my-8 container px-4 lg:px-0">
			<article>
				<header class="flex flex-col space-y-2">
					<h1 class="text-3xl font-bold lg:text-4xl">SST - Cannot use GraphQLScalarType &quot;Boolean&quot; from another module or realm</h1>
					<time class="text-sm font-semibold text-neutral-500" datetime="2022-07-24T00:00:00.000Z">
	Jul 24, 2022
</time>
					
				</header>
				<p>I’ve been playing around with <a href="https://sst.dev">SST</a> over the last few days. SST is a “framework that makes it easy to build serverless apps”. It builds on top of the AWS CDK (Amazon’s cloud development kit) and comes with a set of impressive features including a live lambda dev environment, a management dashboard, debugging with breakpoints in VS Code as well as out-of-the-box support for JS and TS (using esbuild), Go, Python, C#, and F#.</p>
<p>SST is infrastructure-as-code on steroids. It comes with higher-level constructs designed specifically for serverless apps resulting in code that looks mighty impressive:</p>
<pre is:raw="" class="astro-code" style="background-color: #0d1117; overflow-x: auto;"><code><span class="line"><span style="color: #FF7B72">import</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">*</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">as</span><span style="color: #C9D1D9"> sst </span><span style="color: #FF7B72">from</span><span style="color: #C9D1D9"> </span><span style="color: #A5D6FF">'@serverless-stack/resources'</span><span style="color: #C9D1D9">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #FF7B72">import</span><span style="color: #C9D1D9"> { StorageStack } </span><span style="color: #FF7B72">from</span><span style="color: #C9D1D9"> </span><span style="color: #A5D6FF">'./StorageStack'</span><span style="color: #C9D1D9">;</span></span>
<span class="line"><span style="color: #FF7B72">import</span><span style="color: #C9D1D9"> { ApiStack } </span><span style="color: #FF7B72">from</span><span style="color: #C9D1D9"> </span><span style="color: #A5D6FF">'./ApiStack'</span><span style="color: #C9D1D9">;</span></span>
<span class="line"><span style="color: #FF7B72">import</span><span style="color: #C9D1D9"> { AuthStack } </span><span style="color: #FF7B72">from</span><span style="color: #C9D1D9"> </span><span style="color: #A5D6FF">'./AuthStack'</span><span style="color: #C9D1D9">;</span></span>
<span class="line"><span style="color: #FF7B72">import</span><span style="color: #C9D1D9"> { WebStack } </span><span style="color: #FF7B72">from</span><span style="color: #C9D1D9"> </span><span style="color: #A5D6FF">'./WebStack'</span><span style="color: #C9D1D9">;</span></span>
<span class="line"><span style="color: #FF7B72">import</span><span style="color: #C9D1D9"> { CronStack } </span><span style="color: #FF7B72">from</span><span style="color: #C9D1D9"> </span><span style="color: #A5D6FF">'./CronStack'</span><span style="color: #C9D1D9">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #FF7B72">export</span><span style="color: #FFA657"> </span><span style="color: #FF7B72">default</span><span style="color: #FFA657"> </span><span style="color: #FF7B72">function</span><span style="color: #FFA657"> </span><span style="color: #D2A8FF">main</span><span style="color: #FFA657">(app</span><span style="color: #FF7B72">:</span><span style="color: #FFA657"> sst.App)</span><span style="color: #FF7B72">:</span><span style="color: #FFA657"> </span><span style="color: #79C0FF">void</span><span style="color: #FFA657"> </span><span style="color: #C9D1D9">{</span></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #8B949E">// Set default runtime for all functions</span></span>
<span class="line"><span style="color: #C9D1D9">  app.</span><span style="color: #D2A8FF">setDefaultFunctionProps</span><span style="color: #C9D1D9">({</span></span>
<span class="line"><span style="color: #C9D1D9">    runtime: </span><span style="color: #A5D6FF">'nodejs16.x'</span><span style="color: #C9D1D9">,</span></span>
<span class="line"><span style="color: #C9D1D9">    srcPath: </span><span style="color: #A5D6FF">'services'</span><span style="color: #C9D1D9">,</span></span>
<span class="line"><span style="color: #C9D1D9">    bundle: {</span></span>
<span class="line"><span style="color: #C9D1D9">      format: </span><span style="color: #A5D6FF">'esm'</span><span style="color: #C9D1D9">,</span></span>
<span class="line"><span style="color: #C9D1D9">    },</span></span>
<span class="line"><span style="color: #C9D1D9">  });</span></span>
<span class="line"></span>
<span class="line"><span style="color: #C9D1D9">  app</span></span>
<span class="line"><span style="color: #C9D1D9">    .</span><span style="color: #D2A8FF">stack</span><span style="color: #C9D1D9">(StorageStack).</span><span style="color: #D2A8FF">stack</span><span style="color: #C9D1D9">(ApiStack).</span><span style="color: #D2A8FF">stack</span><span style="color: #C9D1D9">(AuthStack).</span><span style="color: #D2A8FF">stack</span><span style="color: #C9D1D9">(CronStack).</span><span style="color: #D2A8FF">stack</span><span style="color: #C9D1D9">(WebStack);</span></span>
<span class="line"><span style="color: #C9D1D9">}</span></span></code></pre>
<h2 id="cannot-use-graphqlscalartype-boolean-from-another-module-or-realm">Cannot use GraphQLScalarType “Boolean” from another module or realm.</h2>
<p>But I digress. While learning and ins-and-outs of the framework (I am nowhere near done), I used the <code>create sst</code> command to set up an app and followed the SST guide to add different stack constructs. I chose Vue.js for my web stack and managed to query the GraphQL endpoint without issue. I was playing with the Cron construct when I suddenly noticed the following error in my console:</p>
<pre is:raw="" class="astro-code" style="background-color: #0d1117; overflow-x: auto;"><code><span class="line"><span style="color: #C9D1D9">Failed to extract schema from pothos</span></span>
<span class="line"><span style="color: #FFA657">Error</span><span style="color: #C9D1D9">: Cannot use GraphQLScalarType </span><span style="color: #A5D6FF">"Boolean"</span><span style="color: #C9D1D9"> from another </span><span style="color: #FF7B72">module</span><span style="color: #C9D1D9"> </span><span style="color: #FFA657">or</span><span style="color: #C9D1D9"> </span><span style="color: #FFA657">realm</span><span style="color: #C9D1D9">.</span></span>
<span class="line"></span>
<span class="line"><span style="color: #FFA657">Ensure</span><span style="color: #C9D1D9"> </span><span style="color: #FFA657">that</span><span style="color: #C9D1D9"> </span><span style="color: #FFA657">there</span><span style="color: #C9D1D9"> </span><span style="color: #FFA657">is</span><span style="color: #C9D1D9"> </span><span style="color: #FFA657">only</span><span style="color: #C9D1D9"> </span><span style="color: #FFA657">one</span><span style="color: #C9D1D9"> </span><span style="color: #FFA657">instance</span><span style="color: #C9D1D9"> </span><span style="color: #FFA657">of</span><span style="color: #C9D1D9"> </span><span style="color: #A5D6FF">"graphql"</span><span style="color: #C9D1D9"> </span><span style="color: #FFA657">in</span><span style="color: #C9D1D9"> </span><span style="color: #FFA657">the</span><span style="color: #C9D1D9"> </span><span style="color: #FFA657">node_modules</span></span>
<span class="line"><span style="color: #FFA657">directory</span><span style="color: #C9D1D9">. </span><span style="color: #FFA657">If</span><span style="color: #C9D1D9"> </span><span style="color: #FFA657">different</span><span style="color: #C9D1D9"> </span><span style="color: #FFA657">versions</span><span style="color: #C9D1D9"> </span><span style="color: #FFA657">of</span><span style="color: #C9D1D9"> </span><span style="color: #A5D6FF">"graphql"</span><span style="color: #C9D1D9"> </span><span style="color: #FFA657">are</span><span style="color: #C9D1D9"> </span><span style="color: #FFA657">the</span><span style="color: #C9D1D9"> </span><span style="color: #FFA657">dependencies</span><span style="color: #C9D1D9"> </span><span style="color: #FFA657">of</span><span style="color: #C9D1D9"> </span><span style="color: #FFA657">other</span></span>
<span class="line"><span style="color: #FFA657">relied</span><span style="color: #C9D1D9"> </span><span style="color: #FFA657">on</span><span style="color: #C9D1D9"> </span><span style="color: #FFA657">modules</span><span style="color: #C9D1D9">, </span><span style="color: #FFA657">use</span><span style="color: #C9D1D9"> </span><span style="color: #A5D6FF">"resolutions"</span><span style="color: #C9D1D9"> </span><span style="color: #FFA657">to</span><span style="color: #C9D1D9"> </span><span style="color: #FFA657">ensure</span><span style="color: #C9D1D9"> </span><span style="color: #FFA657">only</span><span style="color: #C9D1D9"> </span><span style="color: #FFA657">one</span><span style="color: #C9D1D9"> </span><span style="color: #FFA657">version</span><span style="color: #C9D1D9"> </span><span style="color: #FFA657">is</span><span style="color: #C9D1D9"> </span><span style="color: #FFA657">installed</span><span style="color: #C9D1D9">.</span></span>
<span class="line"></span>
<span class="line"><span style="color: #FFA657">https</span><span style="color: #C9D1D9">:</span><span style="color: #8B949E">//yarnpkg.com/en/docs/selective-version-resolutions</span></span>
<span class="line"></span>
<span class="line"><span style="color: #FFA657">Duplicate</span><span style="color: #C9D1D9"> </span><span style="color: #A5D6FF">"graphql"</span><span style="color: #C9D1D9"> </span><span style="color: #FFA657">modules</span><span style="color: #C9D1D9"> </span><span style="color: #FFA657">cannot</span><span style="color: #C9D1D9"> </span><span style="color: #FFA657">be</span><span style="color: #C9D1D9"> </span><span style="color: #FFA657">used</span><span style="color: #C9D1D9"> </span><span style="color: #FFA657">at</span><span style="color: #C9D1D9"> </span><span style="color: #FFA657">the</span><span style="color: #C9D1D9"> </span><span style="color: #FFA657">same</span><span style="color: #C9D1D9"> </span><span style="color: #FFA657">time</span><span style="color: #C9D1D9"> </span><span style="color: #FFA657">since</span><span style="color: #C9D1D9"> </span><span style="color: #FFA657">different</span></span>
<span class="line"><span style="color: #FFA657">versions</span><span style="color: #C9D1D9"> </span><span style="color: #FFA657">may</span><span style="color: #C9D1D9"> </span><span style="color: #FFA657">have</span><span style="color: #C9D1D9"> </span><span style="color: #FFA657">different</span><span style="color: #C9D1D9"> </span><span style="color: #FFA657">capabilities</span><span style="color: #C9D1D9"> </span><span style="color: #FFA657">and</span><span style="color: #C9D1D9"> </span><span style="color: #FFA657">behavior</span><span style="color: #C9D1D9">. </span><span style="color: #FFA657">The</span><span style="color: #C9D1D9"> </span><span style="color: #FFA657">data</span><span style="color: #C9D1D9"> </span><span style="color: #FFA657">from</span><span style="color: #C9D1D9"> </span><span style="color: #FFA657">one</span></span>
<span class="line"><span style="color: #FFA657">version</span><span style="color: #C9D1D9"> </span><span style="color: #FFA657">used</span><span style="color: #C9D1D9"> </span><span style="color: #FFA657">in</span><span style="color: #C9D1D9"> </span><span style="color: #FFA657">the</span><span style="color: #C9D1D9"> </span><span style="color: #FFA657">function</span><span style="color: #C9D1D9"> </span><span style="color: #FFA657">from</span><span style="color: #C9D1D9"> </span><span style="color: #FFA657">another</span><span style="color: #C9D1D9"> </span><span style="color: #FFA657">could</span><span style="color: #C9D1D9"> </span><span style="color: #FFA657">produce</span><span style="color: #C9D1D9"> </span><span style="color: #FFA657">confusing</span><span style="color: #C9D1D9"> </span><span style="color: #FFA657">and</span></span>
<span class="line"><span style="color: #FFA657">spurious</span><span style="color: #C9D1D9"> </span><span style="color: #FFA657">results</span><span style="color: #C9D1D9">.</span></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #FFA657">at</span><span style="color: #C9D1D9"> </span><span style="color: #FFA657">instanceOf</span><span style="color: #C9D1D9"> (/</span><span style="color: #FFA657">Users</span><span style="color: #C9D1D9">/</span><span style="color: #FFA657">Projects</span><span style="color: #C9D1D9">/</span><span style="color: #FFA657">nonstopfootball</span><span style="color: #C9D1D9">/</span><span style="color: #FFA657">node_modules</span><span style="color: #C9D1D9">/</span><span style="color: #FFA657">graphql</span><span style="color: #C9D1D9">/</span><span style="color: #FFA657">jsutils</span><span style="color: #C9D1D9">/</span><span style="color: #FFA657">instanceOf</span><span style="color: #C9D1D9">.</span><span style="color: #FFA657">js</span><span style="color: #C9D1D9">:44:19)</span></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #FFA657">at</span><span style="color: #C9D1D9"> </span><span style="color: #FFA657">isScalarType</span><span style="color: #C9D1D9"> (/</span><span style="color: #FFA657">Users</span><span style="color: #C9D1D9">/</span><span style="color: #FFA657">Projects</span><span style="color: #C9D1D9">/</span><span style="color: #FFA657">nonstopfootball</span><span style="color: #C9D1D9">/</span><span style="color: #FFA657">node_modules</span><span style="color: #C9D1D9">/</span><span style="color: #FFA657">graphql</span><span style="color: #C9D1D9">/</span><span style="color: #FFA657">type</span><span style="color: #C9D1D9">/</span><span style="color: #FFA657">definition</span><span style="color: #C9D1D9">.</span><span style="color: #FFA657">js</span><span style="color: #C9D1D9">:117:37)</span></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #FFA657">at</span><span style="color: #C9D1D9"> </span><span style="color: #FFA657">sortNamedType</span><span style="color: #C9D1D9"> (/</span><span style="color: #FFA657">Users</span><span style="color: #C9D1D9">/</span><span style="color: #FFA657">Projects</span><span style="color: #C9D1D9">/</span><span style="color: #FFA657">nonstopfootball</span><span style="color: #C9D1D9">/</span><span style="color: #FFA657">node_modules</span><span style="color: #C9D1D9">/</span><span style="color: #FFA657">graphql</span><span style="color: #C9D1D9">/</span><span style="color: #FFA657">utilities</span><span style="color: #C9D1D9">/</span><span style="color: #FFA657">lexicographicSortSchema</span><span style="color: #C9D1D9">.</span><span style="color: #FFA657">js</span><span style="color: #C9D1D9">:99:36)</span></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #FFA657">at</span><span style="color: #C9D1D9"> </span><span style="color: #FFA657">keyValMap</span><span style="color: #C9D1D9"> (/</span><span style="color: #FFA657">Users</span><span style="color: #C9D1D9">/</span><span style="color: #FFA657">Projects</span><span style="color: #C9D1D9">/</span><span style="color: #FFA657">nonstopfootball</span><span style="color: #C9D1D9">/</span><span style="color: #FFA657">node_modules</span><span style="color: #C9D1D9">/</span><span style="color: #FFA657">graphql</span><span style="color: #C9D1D9">/</span><span style="color: #FFA657">jsutils</span><span style="color: #C9D1D9">/</span><span style="color: #FFA657">keyValMap</span><span style="color: #C9D1D9">.</span><span style="color: #FFA657">js</span><span style="color: #C9D1D9">:29:27)</span></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #FFA657">at</span><span style="color: #C9D1D9"> </span><span style="color: #FFA657">lexicographicSortSchema</span><span style="color: #C9D1D9"> (/</span><span style="color: #FFA657">Users</span><span style="color: #C9D1D9">/</span><span style="color: #FFA657">Projects</span><span style="color: #C9D1D9">/</span><span style="color: #FFA657">nonstopfootball</span><span style="color: #C9D1D9">/</span><span style="color: #FFA657">node_modules</span><span style="color: #C9D1D9">/</span><span style="color: #FFA657">graphql</span><span style="color: #C9D1D9">/</span><span style="color: #FFA657">utilities</span><span style="color: #C9D1D9">/</span><span style="color: #FFA657">lexicographicSortSchema</span><span style="color: #C9D1D9">.</span><span style="color: #FFA657">js</span><span style="color: #C9D1D9">:31:44)</span></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #FFA657">at</span><span style="color: #C9D1D9"> </span><span style="color: #FFA657">Module</span><span style="color: #C9D1D9">.</span><span style="color: #FFA657">generate</span><span style="color: #C9D1D9"> (</span><span style="color: #FFA657">file</span><span style="color: #C9D1D9">:</span><span style="color: #8B949E">///Users/Projects/nonstopfootball/node_modules/@serverless-stack/core/dist/pothos/generate.js:149:40)</span></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #FFA657">at</span><span style="color: #C9D1D9"> </span><span style="color: #FFA657">build</span><span style="color: #C9D1D9"> (</span><span style="color: #FFA657">file</span><span style="color: #C9D1D9">:</span><span style="color: #8B949E">///Users/Projects/nonstopfootball/node_modules/@serverless-stack/core/dist/cli/PothosBuilder.js:12:28)</span></span></code></pre>
<p>I tried to revert code, Command+Z etc, but no luck. I was commenting things left, right and center but the error would not go away.</p>
<p>Dax from the [SST discord] (<a href="https://discord.com/channels/983865673656705025/985224097342582865/997233904698277898">https://discord.com/channels/983865673656705025/985224097342582865/997233904698277898</a>) mentioned this might be a node_modules conflict when asked about the issue a few days ago, however, I was intrigued why this problem was suddenly occurring for me when I was able to run GraphQL without issue only a few moments ago.</p>
<p>Then it struck me! SST is configured with workspaces to hoist modules into the root node_modules folder. I had used yarn to install sst initially, but, while playing around with the Cron construct I went and used npm to install rss-parser (force of habit). As a result, this mixing of yarn and npm commands caused a conflict within my node_modules resulting in the above errors</p>
<p>To fix the issue, I removed all node_modules folders with <code>rm -Rf node_modules</code> and used yarn to install. I was able to continue working and the conflict was resolved.</p>
<p>Note: If this fix does not work for you, you may have to resort to adding a resolutions section to your graphql folder’s package.json file as follows to force the use of the correct graphql library.</p>
<pre is:raw="" class="astro-code" style="background-color: #0d1117; overflow-x: auto;"><code><span class="line"><span style="color: #A5D6FF">"resolutions"</span><span style="color: #C9D1D9">: {</span></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #7EE787">"graphql"</span><span style="color: #C9D1D9">: </span><span style="color: #A5D6FF">"16.5.0"</span></span>
<span class="line"><span style="color: #C9D1D9">}</span></span></code></pre>
			</article>
		</main>
		<footer class="container my-8 text-sm text-neutral-400 pt-8 text-center">
	&copy; 2023 mirzapandzo.com - All rights reserved.
</footer>
	</body></html>